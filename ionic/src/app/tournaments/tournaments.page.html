<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Torneos</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" color="light">

  <div *ngIf="list.listActive; else stepsTemplate">
    
    <ng-container *ngIf="torneos && torneos.length > 0; else noTournaments">
      
      <ion-card *ngFor="let torneo of torneos" mode="md">
        <ng-container *ngIf="torneo.isTournamentActive">
          
          <ion-card-header>
            <ion-card-title>
              <span *ngFor="let day of torneo.daysTournament; let i = index">
                {{ day.day || "A definir" }}{{ i < torneo.daysTournament.length - 1 ? ' - ' : '' }}
              </span>
              <span>
                {{ " - Futbol " + torneo.format?.formatName + " (" + torneo.edad?.type + ")" }}
              </span>
            </ion-card-title>
            
            <ion-card-subtitle>
              {{ torneo.campeonato?.type + " - " + torneo.ano }}
            </ion-card-subtitle>
          </ion-card-header>

          <ion-card-content>
            <p><strong><ion-icon name="caret-forward-outline"></ion-icon> Comienzo:</strong></p>
            <p>{{ torneo.tournamentDate ? (torneo.tournamentDate | date:'MMMM' | titlecase) : 'A Definir' }}</p>

            <p><strong><ion-icon name="caret-forward-outline"></ion-icon> Dias y Horarios:</strong></p>
            <div *ngFor="let day of torneo.daysTournament">
              <p>
                {{ day.time ? (day.day + ': ' + day.time[0] + " - " + day.time[day.time.length - 1]) : "Horarios: A definir" }}
              </p>
            </div>

            <p><strong><ion-icon name="caret-forward-outline"></ion-icon> Sedes:</strong></p>
            <div *ngFor="let day of torneo.daysTournament">
              <p>{{ day.sede?.name || "A definir" }}</p>
            </div>
          </ion-card-content>

          <div class="contenedor-button">
            <ion-button fill="clear" (click)="goTournament(torneo._id)">Ver Más</ion-button>
          </div>
          
        </ng-container>
      </ion-card>
    </ng-container>

    <ng-template #noTournaments>
      <div class="ion-padding ion-text-center">
        <p>No hay torneos activos en este momento.</p>
      </div>
    </ng-template>
  </div>

  <ng-template #stepsTemplate>
    <div class="listEmpty">
      <div style="width: 100%; margin-top: 45px; text-align: center;">
        <p>Seguí los siguientes pasos:</p>
        <p><strong>1. Crea o elegí tu "Equipo".</strong></p>
        <p><strong>2. Crea o elegí tu "Alineación".</strong></p>
        <p>Luego podrás: anotar "Jugadores", anotarte en "Torneos", ver resultados y deudas.</p>
      </div>
    </div>
  </ng-template>

</ion-content>
